!function(t,e){"use strict";"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(e):t.CircleChart=e}(this,function(){var t="http://www.w3.org/2000/svg",e=function(e){function n(){c(),a(),T("onUpdateStart"),D===!0?i():(l(),T("onUpdateEnd"))}function i(){var t=-Y/2,n=e.definition,i=n.length,l=0;o(t,i,l)}function o(t,n,i){var l,c=e.definition[i],a=0,u=0,s=function(){C(c)&&(a+=k(c,a),u=r(c.$path,t,a)),a<c.percent?l=setTimeout(s,X):n-1>i?(i+=1,u+=t,a=0,o(u,n,i)):T("onUpdateEnd")};l=setTimeout(s,X)}function l(){var t=-Y/2;p(function(e){C(e)&&(t+=r(e.$path,t,e.percent))})}function r(t,e,n){var i=n/100*(2*Y),o=e+i,l=(o-e)%(2*Y)>Y?1:0,r=j+Z(e)*j,c=j+q(e)*j,a=j+Z(o)*j,u=j+q(o)*j,s=["M",r,c,"A",j,j,0,l,1,a,u,"L",j,j,"Z"];return t.setAttribute("d",s.join(" ")),i}function c(){I!==!0&&(O=0,p(function(t){t.value=Number(t.value||0),O+=t.value}))}function a(){W=0,0!==O&&p(function(t,e){t.percent=Math.round(100*t.value/O),W+=t.percent,w(e)&&I===!1&&(t.percent+=100-W)})}function u(){p(s)}function s(t){var e=A("path");x(t.cls)&&e.setAttributeNS(null,"class",t.cls),(x(t.color)||G)&&e.setAttributeNS(null,"style",(x(t.color)?"fill: "+t.color+";":"")+" "+(G===!0?"cursor: pointer;":"")),G&&e.addEventListener("click",f.bind(t)),L.appendChild(e),t.$path=e}function f(t){var n,i=this;G&&(n=E(),P.textContent=i.label+" : "+i.value,P.style.left=t.x+n.left-P.offsetWidth/2+"px",P.style.top=t.y+n.top-20+"px",e.tooltipClass?P.classList.toggle("circle-chart-tooltip-is-visible"):(P.style.visibility="visible",P.style.opacity="1",P.style["z-index"]="auto",P.style.transition="visibility 0s .6s, z-index 0s .6s, opacity .6s ease;",P.style.position="absolute")),T("onPathClick",t)}function d(){m()}function p(t){for(var n=0,i=e.definition,o=i.length;o>n;n+=1)t.call(M,i[n],n)}function v(){L=A("svg:svg"),L.setAttribute("width",U),L.setAttribute("height",U),L.setAttribute("viewBox","0 0 "+U+" "+U)}function h(){var t=g(j,j);x(e.background)?t.setAttributeNS(null,"style","fill: "+e.background):t.setAttributeNS(null,"class","circle-chart-background"),L.appendChild(t)}function b(){if(!!e.isPie==!1){var t=g(j,U*B);x(e.middleCircleColor)?t.setAttributeNS(null,"style","fill: "+e.middleCircleColor):t.setAttributeNS(null,"class","circle-chart-background-empty"),L.appendChild(t)}}function y(){P=document.createElement("div"),e.tooltipClass&&(P.className=e.tooltipClass),m(),z.appendChild(P),document.body.addEventListener("click",$)}function m(){P.style.cssText="position: fixed; visibility: hidden; opacity: 0; z-index: -1; color: #fff; padding: 10px; background-color: rgba(0,0,0,0.6); transition: opacity .6s ease;"}function g(t,e){var n=A("circle");return n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",t),n.setAttributeNS(null,"r",e),n}function A(e){return document.createElementNS(t,e)}function C(t){return t.value>0&&t.percent>0}function x(t){return"undefined"!=typeof t}function N(t,e){x(e)&&(t.value=parseInt(e))}function S(t){t.removeAttribute("d")}function w(t){return t+1===e.definition.length}function k(t,e){var n=t.percent,i=R;return e+R>n&&(i=n-e),e+i===100&&(i-=1e-4),i}function T(t,n){var i=e[t];"function"==typeof i&&i.call(M,{$chart:L,chart:M,total:O,event:n,$tooltip:P})}function $(t){var e=t.target;z.contains(e)===!1&&d()}function E(){var t=document.documentElement;return{left:(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),top:(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}}var L,P,M=this,z=e.$container,U=e.size||z.offsetWidth,j=U/2,I=x(e.staticTotal)?e.staticTotal:!1,O=I?e.total||0:0,W=0,B=e.ringProportion||.35,R=e.speed||1,X=e.durration||10,Y=Math.PI,Z=Math.cos,q=Math.sin,D=x(e.animated)?e.animated:!0,F=x(e.drawAtStart)?e.drawAtStart:!0,G=x(e.tooltips)?!!e.tooltips:!1,H=x(e.tooltips)?e.addPiePathsAtLast:!1;v(),h(),H?(b(),u()):(u(),b()),G&&y(),e.$container.appendChild(L),T("onAfterRender"),F&&n(),M.update=function(t){p(function(e){N(e,t[e.name]),S(e.$path)}),n()},M.setTotal=function(t){O=Number(t)}};return e}());